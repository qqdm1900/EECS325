<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 6.0/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="lw.css" CHARSET="ISO-8859-1" TYPE="text/css">
<TITLE>
 trace-on-access
</TITLE>

<LINK REL="next" HREF="lw-575.htm" TYPE="text/html">
<LINK REL="prev" HREF="lw-573.htm" TYPE="text/html">
<LINK REL="up" HREF="lw-559.htm" TYPE="text/html">
<LINK REL="top" HREF="lw.htm" TYPE="text/html">
<LINK REL="contents" HREF="lw-2.htm" TYPE="text/html">
<LINK REL="index" HREF="lw-1525.htm" TYPE="text/html">
</HEAD>
<BODY BGCOLOR="#ffffff">
<DIV CLASS="HTMLBreadCrumbs"><A HREF="../../intro.htm">All Manuals</A> &gt; <A HREF="lw.htm">LispWorks User Guide and Reference Manual</A> &gt; <A HREF="lw-559.htm">25 The CLOS Package</A><BR><BR>
</DIV><A HREF="lw-575.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A><A HREF="lw-573.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Prev BORDER=0></A><A HREF="lw-559.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A><A HREF="lw.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A><A HREF="lw-2.htm"><IMG ALIGN=BOTTOM SRC=contents.gif ALT=Contents BORDER=0></A><A HREF="lw-1525.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A>
<H4 CLASS="REntry">
<A NAME="pgfId-886496"></A><A NAME="31743"></A>trace<A NAME="marker-911457"></A>-on-access</H4>
<DIV>
<H5 CLASS="REntry-type">
<A NAME="pgfId-886497"></A>Function</H5>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-886543"></A>Summary</H5>
<P CLASS="RBody">
<A NAME="pgfId-886544"></A>Invokes the trace facilities when an instance of a class is accessed. </P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-886545"></A>Package</H5>
<P CLASS="RSignature">
<A NAME="pgfId-886501"></A>clos</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-886502"></A>Signature</H5>
<P CLASS="RSignature">
<A NAME="pgfId-886503"></A>trace-on-access <EM CLASS="Variable">
instance</EM>
 &amp;key <EM CLASS="Variable">
read</EM>
 <EM CLASS="Variable">
write</EM>
 <EM CLASS="Variable">
slot-names</EM>
 <EM CLASS="Variable">
break</EM>
 <EM CLASS="Variable">
when</EM>
 <EM CLASS="Variable">
process</EM>
 <EM CLASS="Variable">
trace-output</EM>
 <EM CLASS="Variable">
entrycond</EM>
 <EM CLASS="Variable">
eval-before</EM>
 <EM CLASS="Variable">
before</EM>
 <EM CLASS="Variable">
backtrace</EM>
 =&gt; t</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-886504"></A>Arguments</H5>
<P CLASS="RDescription-Item">
<A NAME="pgfId-886505"></A><EM CLASS="Variable">
instance</EM>
</P>
<P CLASS="RDescription-C">A CLOS instance.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-886506"></A><EM CLASS="Variable">
read</EM>
</P>
<P CLASS="RDescription-C">A generalized boolean.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-914138"></A><EM CLASS="Variable">
write</EM>
</P>
<P CLASS="RDescription-C">A generalized boolean.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-886508"></A><EM CLASS="Variable">
slot-names</EM>
</P>
<P CLASS="RDescription-C">A list of symbols, or <CODE CLASS="Code">
t</CODE>
.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-886553"></A><EM CLASS="Variable">
break</EM>
</P>
<P CLASS="RDescription-C">A generalized boolean.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-912796"></A><EM CLASS="Variable">
when</EM>
</P>
<P CLASS="RDescription-C">A form.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-912800"></A><EM CLASS="Variable">
process</EM>
</P>
<P CLASS="RDescription-C">A form.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-912807"></A><EM CLASS="Variable">
trace-output</EM>
</P>
<P CLASS="RDescription-C">A form.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-912811"></A><EM CLASS="Variable">
entrycond</EM>
</P>
<P CLASS="RDescription-C">A form.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-912815"></A><EM CLASS="Variable">
eval-before</EM>
</P>
<P CLASS="RDescription-C">A list of forms.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-912818"></A><EM CLASS="Variable">
before</EM>
</P>
<P CLASS="RDescription-C">A list of forms.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-912822"></A><EM CLASS="Variable">
backtrace</EM>
</P>
<P CLASS="RDescription-C">A keyword, <CODE CLASS="Code">
t</CODE>
 or <CODE CLASS="Code">
nil</CODE>
.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-886510"></A>Values</H5>
<P CLASS="RDescription">
<A NAME="pgfId-886511"></A>Returns <CODE CLASS="Code">
t</CODE>
.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-886512"></A>Description</H5>
<P CLASS="RBody">
<A NAME="pgfId-911757"></A>A useful debugging function which causes access to <EM CLASS="Variable">
instance</EM>
 to invoke the trace facilities. Accesses include calls to <CODE CLASS="Code">
slot-value</CODE>
 and accessor functions defined by the class of <EM CLASS="Variable">
instance</EM>
.</P>
<P CLASS="RBody">
<A NAME="pgfId-917117"></A>The keyword arguments control which type of access are traced, and provide preconditions for tracing, code to run before access, and how to print any trace output. They are similar to those supported by the <A HREF="lw-675.htm#58889" CLASS="XRef">trace</A> macro (but note that these CLOS symbols are functions, so the keyword values are evaluated immediately, unlike in <A HREF="lw-675.htm#58889" CLASS="XRef">trace</A>).</P>
<P CLASS="RBody">
<A NAME="pgfId-913964"></A><EM CLASS="Variable">
read</EM>
 controls whether reading slots is traced. The default is <CODE CLASS="Code">
t</CODE>
.</P>
<P CLASS="RBody">
<A NAME="pgfId-914062"></A><EM CLASS="Variable">
write</EM>
 controls whether writing slots is traced. The default is <CODE CLASS="Code">
t</CODE>
.</P>
<P CLASS="RBody">
<A NAME="pgfId-914393"></A><EM CLASS="Variable">
slot-names</EM>
 controls which slots to trace access for. It can be a list of symbols which are the slot-names. The default value, <CODE CLASS="Code">
t</CODE>
, means trace access to all slots.</P>
<P CLASS="RBody">
<A NAME="pgfId-914512"></A><EM CLASS="Variable">
break</EM>
 controls whether the debugger is entered when a traced slot in <EM CLASS="Variable">
instance</EM>
 is accessed. When <CODE CLASS="Code">
nil</CODE>
, the debugger is not invoked and messages are printed to <CODE CLASS="Code">
*trace-output*</CODE>
. The default value is <CODE CLASS="Code">
nil</CODE>
.</P>
<P CLASS="RBody">
<A NAME="pgfId-914675"></A><EM CLASS="Variable">
when</EM>
 is evaluated during slot access to determine whether any tracing should occur.  The default value is <CODE CLASS="Code">
t</CODE>
.</P>
<P CLASS="RBody">
<A NAME="pgfId-914858"></A><EM CLASS="Variable">
process</EM>
 is evaluated during slot access to determine whether any tracing should occur in the current process.  The form should evaluate to either <CODE CLASS="Code">
nil</CODE>
 (meaning trace in all processes), a string naming the process in which tracing should occur (see <A HREF="lw-1083.htm#65666" CLASS="XRef">process-name</A>, <A HREF="lw-1028.htm#45900" CLASS="XRef">find-process-from-name</A>), or a list of strings naming the processes in which tracing should occur. The default value is <CODE CLASS="Code">
nil</CODE>
.</P>
<P CLASS="RBody">
<A NAME="pgfId-914985"></A><EM CLASS="Variable">
trace-output</EM>
 is evaluated during slot access to determine the stream on which to print tracing messages. If this is <CODE CLASS="Code">
nil</CODE>
 then the value of <CODE CLASS="Code">
*trace-output*</CODE>
 is used. The default value is <CODE CLASS="Code">
nil</CODE>
.</P>
<P CLASS="RBody">
<A NAME="pgfId-915087"></A><EM CLASS="Variable">
entrycond</EM>
 is evaluated during slot access to determine whether the default tracing messages should be printed.</P>
<P CLASS="RBody">
<A NAME="pgfId-915200"></A><EM CLASS="Variable">
eval-before</EM>
 is a list of forms which are evaluated during slot access.</P>
<P CLASS="RBody">
<A NAME="pgfId-915290"></A><EM CLASS="Variable">
before</EM>
 is a list of forms which are evaluated during slot access. The first value returned by each form is printed.</P>
<P CLASS="RBody">
<A NAME="pgfId-915478"></A><EM CLASS="Variable">
backtrace</EM>
 controls what kind of backtrace to print. If this is <CODE CLASS="Code">
nil</CODE>
 then no backtrace is printed, and this is the default value. Otherwise it can be any of the following values:</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-915479"></A><CODE CLASS="Code">
:quick</P>
<P CLASS="RDescription-C"></CODE>
Like the <CODE CLASS="Code">
:bq</CODE>
 debugger command.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-915480"></A> <CODE CLASS="Code">
t</CODE>
</P>
<P CLASS="RDescription-C">Like the <CODE CLASS="Code">
:b</CODE>
 debugger command.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-915481"></A><CODE CLASS="Code">
:verbose</CODE>
</P>
<P CLASS="RDescription-C">Like the <CODE CLASS="Code">
:b :verbose</CODE>
 debugger command.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-915464"></A><CODE CLASS="Code">
:bug-form</CODE>
</P>
<P CLASS="RDescription-C">Like the <CODE CLASS="Code">
:bug-form</CODE>
 debugger command.</P>
<P CLASS="RBody">
<A NAME="pgfId-911794"></A>Other instances of the same class are unaffected and you can remove the trace by calling <A HREF="lw-578.htm#86216" CLASS="XRef">untrace-on-access</A>.</P>
<P CLASS="RBody">
<A NAME="pgfId-917005"></A>The variable <A HREF="lw-850.htm#67109" CLASS="XRef">*traced-arglist*</A> is bound to a list of arguments for the slot access during evaluation of the options above, that is (<EM CLASS="Variable">
instance</EM>
 <EM CLASS="Variable">
slot-name</EM>
) when reading a slot and (<EM CLASS="Variable">
new-value</EM>
 <EM CLASS="Variable">
instance</EM>
 <EM CLASS="Variable">
slot-name</EM>
) when writing a slot.</P>
<P CLASS="RBody">
<A NAME="pgfId-911701"></A>A common use of this function is to find where a slot is being changed in a complex program.</P>
<P CLASS="RBody">
<A NAME="pgfId-886571"></A>This function, when called with <CODE CLASS="Code">
:break t</CODE>
, replaces the deprecated function <A HREF="lw-561.htm#63806" CLASS="XRef">break-on-access</A>.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887104"></A>See also</H5>
<P CLASS="RBody">
<A NAME="pgfId-887148"></A><A HREF="lw-578.htm#86216" CLASS="XRef">untrace-on-access</A><BR>
<A HREF="lw-573.htm#14685" CLASS="XRef">trace-new-instances-on-access</A><BR>
<A HREF="lw-561.htm#63806" CLASS="XRef">break-on-access</A></P>
</DIV>
<HR>
<P CLASS="Copyrighttext-small"><I CLASS="Italic">LispWorks User Guide and Reference Manual - 21 Dec 2011</I></P>
<P><A HREF="lw-575.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A><A HREF="lw-573.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Prev BORDER=0></A><A HREF="lw-559.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A><A HREF="lw.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A><A HREF="lw-2.htm"><IMG ALIGN=BOTTOM SRC=contents.gif ALT=Contents BORDER=0></A><A HREF="lw-1525.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A>
</BODY>
</HTML>
