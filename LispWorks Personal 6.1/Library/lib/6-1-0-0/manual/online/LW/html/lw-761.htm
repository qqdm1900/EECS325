<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 6.0/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="lw.css" CHARSET="ISO-8859-1" TYPE="text/css">
<TITLE>
 clean-down
</TITLE>

<LINK REL="next" HREF="lw-762.htm" TYPE="text/html">
<LINK REL="prev" HREF="lw-760.htm" TYPE="text/html">
<LINK REL="up" HREF="lw-744.htm" TYPE="text/html">
<LINK REL="top" HREF="lw.htm" TYPE="text/html">
<LINK REL="contents" HREF="lw-2.htm" TYPE="text/html">
<LINK REL="index" HREF="lw-1525.htm" TYPE="text/html">
</HEAD>
<BODY BGCOLOR="#ffffff">
<DIV CLASS="HTMLBreadCrumbs"><A HREF="../../intro.htm">All Manuals</A> &gt; <A HREF="lw.htm">LispWorks User Guide and Reference Manual</A> &gt; <A HREF="lw-744.htm">32 The HCL Package</A><BR><BR>
</DIV><A HREF="lw-762.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A><A HREF="lw-760.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Prev BORDER=0></A><A HREF="lw-744.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A><A HREF="lw.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A><A HREF="lw-2.htm"><IMG ALIGN=BOTTOM SRC=contents.gif ALT=Contents BORDER=0></A><A HREF="lw-1525.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A>
<H4 CLASS="REntry">
<A NAME="pgfId-940065"></A><A NAME="25516"></A>clean<A NAME="marker-1039574"></A>-down</H4>
<DIV>
<H5 CLASS="REntry-type">
<A NAME="pgfId-928742"></A>Function</H5>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887109"></A>Summary</H5>
<P CLASS="RBody">
<A NAME="pgfId-887110"></A>Frees memory and reduces the size of the image, if possible.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887111"></A>Package</H5>
<P CLASS="RSignature">
<A NAME="pgfId-887112"></A>hcl</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887113"></A>Signature </H5>
<P CLASS="RSignature">
<A NAME="pgfId-887114"></A>clean-down &amp;optional <EM CLASS="Variable">
full</EM>
 =&gt; <EM CLASS="Variable">
new-size</EM>
</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887115"></A>Arguments </H5>
<P CLASS="RBody">
<A NAME="pgfId-887116"></A>full controls whether to operate on the highest generation. The default is <CODE CLASS="Code">
t</CODE>
.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887117"></A>Values</H5>
<P CLASS="RDescription-Item">
<A NAME="pgfId-887118"></A><EM CLASS="Variable">
new-size</EM>
</P>
<P CLASS="RDescription-C">The new size of the image, after reduction.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887119"></A>Description </H5>
<P CLASS="RBody">
<A NAME="pgfId-975952"></A>Tries to free as much memory as possible and then reduce the size of the image as much as possible, and also move all the allocated objects to an old generation.</P>
<P CLASS="RBody">
<A NAME="pgfId-977224"></A>If full is <CODE CLASS="Code">
t</CODE>
, <CODE CLASS="Code">
clean-down</CODE>
 does a mark and sweep on generation 3, promotes all the objects into generation 3, deletes the empty segments and tries to reduce the image size. This is called by default before saving an image.</P>
<P CLASS="RBody">
<A NAME="pgfId-977225"></A>If full is <CODE CLASS="Code">
nil</CODE>
, <CODE CLASS="Code">
clean-down</CODE>
 does a mark and sweep on generation 2, promotes all the objects to generation 2 and tries to reduce the size of all generations up to 2, but does not touch generation 3.</P>
<P CLASS="RBody">
<A NAME="pgfId-977004"></A><CODE CLASS="Code">
clean-down</CODE>
 may fail to delete empty segments if there are static segments in high address space.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-1094467"></A>Notes</H5>
<OL>
<LI CLASS="RStep-1">
<A NAME="pgfId-1408853"></A><A HREF="lw-860.htm#try-move-in-generation" CLASS="XRef">try-move-in-generation</A> uses less CPU than <CODE CLASS="Code">
clean-down</CODE>
, though it does not do the mark and sweep.</LI>
<LI CLASS="RStep">
<A NAME="pgfId-1408949"></A>In 64-bit LispWorks, <CODE CLASS="Code">
clean-down</CODE>
 is implemented as if by <CODE CLASS="Code">
(gc-generation 7 :coalesce t)</CODE>
 though you can use <A HREF="lw-797.htm#55872" CLASS="XRef">gc-generation</A> directly for better control.</LI>
</OL>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887121"></A>See also </H5>
<P CLASS="RBody">
<A NAME="pgfId-887125"></A><A HREF="lw-797.htm#55872" CLASS="XRef">gc-generation</A><BR>
<A HREF="lw-827.htm#36980" CLASS="XRef">save-image</A><BR>
<A HREF="lw-860.htm#try-move-in-generation" CLASS="XRef">try-move-in-generation</A></P>
</DIV>
<HR>
<P CLASS="Copyrighttext-small"><I CLASS="Italic">LispWorks User Guide and Reference Manual - 21 Dec 2011</I></P>
<P><A HREF="lw-762.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A><A HREF="lw-760.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Prev BORDER=0></A><A HREF="lw-744.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A><A HREF="lw.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A><A HREF="lw-2.htm"><IMG ALIGN=BOTTOM SRC=contents.gif ALT=Contents BORDER=0></A><A HREF="lw-1525.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A>
</BODY>
</HTML>
