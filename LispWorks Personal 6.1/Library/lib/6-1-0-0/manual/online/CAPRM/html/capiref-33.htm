<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 6.0/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="capiref.css" CHARSET="ISO-8859-1" TYPE="text/css">
<TITLE>
 choice
</TITLE>

<LINK REL="next" HREF="capiref-34.htm" TYPE="text/html">
<LINK REL="prev" HREF="capiref-32.htm" TYPE="text/html">
<LINK REL="up" HREF="capiref-4.htm" TYPE="text/html">
<LINK REL="top" HREF="capiref.htm" TYPE="text/html">
<LINK REL="contents" HREF="capiref-2.htm" TYPE="text/html">
<LINK REL="index" HREF="capiref-693.htm" TYPE="text/html">
</HEAD>
<BODY BGCOLOR="#ffffff">
<DIV CLASS="HTMLBreadCrumbs"><A HREF="../../intro.htm">All Manuals</A> &gt; <A HREF="capiref.htm">CAPI Reference Manual</A> &gt; <A HREF="capiref-4.htm">1 CAPI Reference Entries</A><BR><BR>
</DIV><A HREF="capiref-34.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A><A HREF="capiref-32.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Prev BORDER=0></A><A HREF="capiref-4.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A><A HREF="capiref.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A><A HREF="capiref-2.htm"><IMG ALIGN=BOTTOM SRC=contents.gif ALT=Contents BORDER=0></A><A HREF="capiref-693.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A>
<H4 CLASS="REntry">
<A NAME="pgfId-887487"></A><A NAME="22482"></A>choice<A NAME="marker-3944339"></A></H4>
<DIV>
<H5 CLASS="REntry-type">
<A NAME="pgfId-887501"></A>Class</H5>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887155"></A>Summary</H5>
<P CLASS="RBody">
<A NAME="pgfId-887157"></A>A <CODE CLASS="Code">
choice</CODE>
 is an abstract class that collects together a group of items, and provides functionality for displaying and selecting them. </P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-3944328"></A>Package</H5>
<P CLASS="RSignature">
<A NAME="pgfId-3944329"></A>capi</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887160"></A>Superclasses </H5>
<P CLASS="RSignature">
<A NAME="pgfId-887162"></A><A HREF="capiref-45.htm#36673" CLASS="XRef">collection</A></P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887164"></A>Subclasses</H5>
<P CLASS="RSignature">
<A NAME="pgfId-887166"></A><A HREF="capiref-23.htm#40715" CLASS="XRef">button-panel</A><BR>
<A HREF="capiref-138.htm#61508" CLASS="XRef">extended-selection-tree-view</A><BR>
<A HREF="capiref-162.htm#26475" CLASS="XRef">graph-pane</A><BR>
<A HREF="capiref-214.htm#30299" CLASS="XRef">list-panel</A><BR>
<A HREF="capiref-246.htm#24767" CLASS="XRef">menu-component</A><BR>
<A HREF="capiref-274.htm#24685" CLASS="XRef">option-pane</A><BR>
<A HREF="capiref-462.htm#81588" CLASS="XRef">tree-view</A></P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887172"></A>Initargs</H5>
<P CLASS="RDescription-Item">
<A NAME="pgfId-887174"></A><CODE CLASS="Code">
:interaction</CODE>
<A NAME="marker-952805"></A></P>
<P CLASS="RDescription-C">The interaction style of the choice.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-887175"></A><CODE CLASS="Code">
:selection</CODE>
<A NAME="marker-952806"></A></P>
<P CLASS="RDescription-C">The indexes of the choice's selected items.</P>
<P CLASS="RDescription">
<A NAME="pgfId-887176"></A><CODE CLASS="Code">
:selected-item</CODE>
<A NAME="marker-952807"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-2152632"></A>The selected item for a single selection choice.</P>
<P CLASS="RDescription">
<A NAME="pgfId-887177"></A><CODE CLASS="Code">
:selected-items</CODE>
<A NAME="marker-952808"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-2152651"></A>A list of the selected items.</P>
<P CLASS="RDescription">
<A NAME="pgfId-887178"></A><CODE CLASS="Code">
:keep-selection-p</CODE>
<A NAME="marker-952809"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-943083"></A>If <CODE CLASS="Code">
t</CODE>
, retains any selection when the items change.</P>
<P CLASS="RDescription">
<A NAME="pgfId-3866183"></A><CODE CLASS="Code">
:initial-focus-item</CODE>
<A NAME="marker-3869928"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-3866184"></A>If supplied, this should be an item in the choice.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887180"></A>Accessors</H5>
<P CLASS="RSignature">
<A NAME="pgfId-887182"></A><A NAME="marker-3759928"></A><A NAME="50098"></A>choice-selection<A NAME="marker-9342072"></A></P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887186"></A>Readers</H5>
<P CLASS="RSignature">
<A NAME="pgfId-887188"></A><A NAME="marker-3759923"></A>choice-interaction<BR>
<A NAME="marker-3869935"></A>choice-initial-focus-item</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887190"></A>Description</H5>
<P CLASS="RBody">
<A NAME="pgfId-887192"></A>The class <CODE CLASS="Code">
choice</CODE>
 inherits most of its behavior from <A HREF="capiref-45.htm#36673" CLASS="XRef">collection</A>, and then provides the selection facilities itself. The classes <A HREF="capiref-214.htm#30299" CLASS="XRef">list-panel</A>, <A HREF="capiref-23.htm#40715" CLASS="XRef">button-panel</A>, <A HREF="capiref-274.htm#24685" CLASS="XRef">option-pane</A>, <A HREF="capiref-246.htm#24767" CLASS="XRef">menu-component</A> and <A HREF="capiref-162.htm#26475" CLASS="XRef">graph-pane</A> inherit from it, and so it plays a key role in CAPI applications. </P>
<P CLASS="RBody">
<A NAME="pgfId-887196"></A>A <CODE CLASS="Code">
choice</CODE>
 can have one of four different interaction styles, and these control how it behaves when an item is selected by the user. <EM CLASS="Variable">
interaction</EM>
 can be one of:</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-887199"></A><CODE CLASS="Code">
:no-selection</CODE>
<A NAME="marker-952810"></A></P>
<P CLASS="RDescription-C">The choice behaves just as a collection.</P>
<P CLASS="RDescription">
<A NAME="pgfId-887200"></A><CODE CLASS="Code">
:single-selection</CODE>
</P>
<P CLASS="RDescription-C">
<A NAME="pgfId-2152663"></A>The choice can have only one selected item.</P>
<P CLASS="RDescription">
<A NAME="pgfId-887201"></A><CODE CLASS="Code">
:multiple-selection</CODE>
</P>
<P CLASS="RDescription-C">
<A NAME="pgfId-2152683"></A>The choice can have multiple selected items, except on Mac OS X.</P>
<P CLASS="RDescription">
<A NAME="pgfId-887202"></A><CODE CLASS="Code">
:extended-selection</CODE>
</P>
<P CLASS="RDescription-C">
<A NAME="pgfId-887587"></A>An alternative to <CODE CLASS="Code">
multiple-selection</CODE>
.</P>
<P CLASS="RBody">
<A NAME="pgfId-887204"></A>With <EM CLASS="Variable">
interaction</EM>
 <CODE CLASS="Code">
:no-selection</CODE>
, the choice cannot have a selection, and so behaves just as a collection would. </P>
<P CLASS="RBody">
<A NAME="pgfId-887206"></A>With <EM CLASS="Variable">
interaction</EM>
 <CODE CLASS="Code">
:single-selection</CODE>
, the choice can only have one item selected at a time. When a new selection is made, the old selection is cleared and its <EM CLASS="Variable">
selection-callback</EM>
 is called. The <EM CLASS="Variable">
selection-callback</EM>
 is also called when the user invokes the selection gesture on the selected item.</P>
<P CLASS="RBody">
<A NAME="pgfId-2152773"></A>With <EM CLASS="Variable">
interaction</EM>
 <CODE CLASS="Code">
:multiple-selection</CODE>
, the choice can have any number of items selected, and selecting an item toggles its selection status. The <EM CLASS="Variable">
selection-callback</EM>
 is called when an item becomes selected, and the <EM CLASS="Variable">
retract-callback</EM>
 is called when an item is deselected. <CODE CLASS="Code">
:multiple-selection</CODE>
 is not supported for lists on Mac OS X.</P>
<P CLASS="RBody">
<A NAME="pgfId-2152774"></A>With <EM CLASS="Variable">
interaction</EM>
 <CODE CLASS="Code">
:extended-selection</CODE>
, the choice can have any number of items selected as with <CODE CLASS="Code">
:multiple-selection</CODE>
 interaction, but the usual selection gesture removes the old selection. However, there is a window system-specific means of extending the selection. When an item is selected the <EM CLASS="Variable">
selection-callback</EM>
 is called, when the selection is extended the <EM CLASS="Variable">
extend-callback</EM>
 is called, and when an item is deselected the <EM CLASS="Variable">
retract-callback</EM>
 is called.</P>
<P CLASS="RBody">
<A NAME="pgfId-5625006"></A>On Mac OS X, the selection gesture is mouse (left button) click. De-selection and discontinuous selections are made by <CODE CLASS="Code">
Command+Click</CODE>
, and a continuous selection is made by <CODE CLASS="Code">
Shift+Click</CODE>
, regardless of whether if <EM CLASS="Variable">
interaction</EM>
 is <CODE CLASS="Code">
:multiple-selection</CODE>
 or <CODE CLASS="Code">
:extended-selection</CODE>
.</P>
<P CLASS="RBody">
<A NAME="pgfId-887220"></A>The choice's selection stores the indices of the currently selected item, and is a single number for single selection choices and a list for all other interactions. Therefore when calling <CODE CLASS="Code">
(setf choice-selection)</CODE>
 you must pass an integer or <CODE CLASS="Code">
nil</CODE>
 if <EM CLASS="Variable">
interaction</EM>
 is <CODE CLASS="Code">
:single-selection</CODE>
, and you must pass a list of integers if <EM CLASS="Variable">
interaction</EM>
 is <CODE CLASS="Code">
:multiple-selection</CODE>
 or <CODE CLASS="Code">
:extended-selection</CODE>
.The functions <A HREF="capiref-34.htm#20478" CLASS="XRef">choice-selected-item</A> and <A HREF="capiref-36.htm#32414" CLASS="XRef">choice-selected-items</A> treat the selection in terms of the items themselves as opposed to their indices.</P>
<P CLASS="RBody">
<A NAME="pgfId-887225"></A>Usually when a choice's items are changed using <CODE CLASS="Code">
(setf collection-items)</CODE>
 the selection is lost.</P>
<P CLASS="RBody">
<A NAME="pgfId-887226"></A>However, if the choice was created with <CODE CLASS="Code">
:keep-selection-p</CODE>
 <CODE CLASS="Code">
t</CODE>
, then the selection is preserved over the change. </P>
<P CLASS="RBody">
<A NAME="pgfId-3869941"></A><EM CLASS="Variable">
initial-focus-item</EM>
, if supplied, specifies the item which has the input focus when the choice is first displayed.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-9282213"></A>Notes</H5>
<P CLASS="RBody">
<A NAME="pgfId-9282276"></A>When calling <CODE CLASS="Code">
(setf choice-selection)</CODE>
 you must pass an integer or <CODE CLASS="Code">
nil</CODE>
 when <EM CLASS="Variable">
interaction</EM>
 is <CODE CLASS="Code">
:single-selection</CODE>
. You must pass a list for other values of <EM CLASS="Variable">
interaction</EM>
.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-6908541"></A>Compatibility note</H5>
<P CLASS="RBody">
<A NAME="pgfId-6908542"></A>In LispWorks 5.0 and earlier versions, for interaction <CODE CLASS="Code">
:single-selection</CODE>
 the <EM CLASS="Variable">
selection-callback</EM>
 is called only after a new selection is made.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887229"></A>Example</H5>
<P CLASS="RBody">
<A NAME="pgfId-887348"></A>The following example defines a choice with three possible selections.</P>
<PRE CLASS="RCode-first"><A NAME="pgfId-995915"></A>(setq choice (make-instance 'capi:choice</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-887233"></A>                            :items '(&quot;One&quot; &quot;Two&quot; &quot;Three&quot;)</PRE>
<PRE CLASS="RCode-last"><A NAME="pgfId-887234"></A>                            :selection 0))</PRE>
<PRE CLASS="RCode-first"><A NAME="pgfId-887238"></A>(capi:display-message &quot;Selection: &#126;S&quot;</PRE>
<PRE CLASS="RCode-last"><A NAME="pgfId-887240"></A>                      (capi:choice-selection choice))</PRE>
<CODE CLASS="RCode-line">
<A NAME="pgfId-887244"></A>(capi:choice-selected-item choice)</CODE>
<P CLASS="RBody">
<A NAME="pgfId-887248"></A>The selection is changed using the following code.</P>
<CODE CLASS="RCode-line">
<A NAME="pgfId-995953"></A>(setf (capi:choice-selection choice) 1)</CODE>
<CODE CLASS="RCode-line">
<A NAME="pgfId-887252"></A>(capi:choice-selected-item choice)</CODE>
<P CLASS="RBody">
<A NAME="pgfId-3456197"></A>Also see the examples in the directory <CODE CLASS="Code">
examples/capi/choice/</CODE>
 and in <CODE CLASS="Code">
examples/capi/graphics/graph-pane.lisp</CODE>
</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887260"></A>See also</H5>
<P CLASS="RBody">
<A NAME="pgfId-1885355"></A><A HREF="capiref-34.htm#20478" CLASS="XRef">choice-selected-item</A><BR>
<A HREF="capiref-35.htm#59557" CLASS="XRef">choice-selected-item-p</A><BR>
<A HREF="capiref-36.htm#32414" CLASS="XRef">choice-selected-items</A><BR>
<A HREF="capiref-37.htm#22369" CLASS="XRef">choice-update-item</A></P>
</DIV>
<HR>
<P CLASS="Copyrighttext-small"><I CLASS="Italic">CAPI Reference Manual - 15 Dec 2011</I></P>
<P><A HREF="capiref-34.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A><A HREF="capiref-32.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Prev BORDER=0></A><A HREF="capiref-4.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A><A HREF="capiref.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A><A HREF="capiref-2.htm"><IMG ALIGN=BOTTOM SRC=contents.gif ALT=Contents BORDER=0></A><A HREF="capiref-693.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A>
</BODY>
</HTML>
