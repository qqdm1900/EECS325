<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 6.0/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="capiref.css" CHARSET="ISO-8859-1" TYPE="text/css">
<TITLE>
 prompt-with-list
</TITLE>

<LINK REL="next" HREF="capiref-332.htm" TYPE="text/html">
<LINK REL="prev" HREF="capiref-330.htm" TYPE="text/html">
<LINK REL="up" HREF="capiref-4.htm" TYPE="text/html">
<LINK REL="top" HREF="capiref.htm" TYPE="text/html">
<LINK REL="contents" HREF="capiref-2.htm" TYPE="text/html">
<LINK REL="index" HREF="capiref-693.htm" TYPE="text/html">
</HEAD>
<BODY BGCOLOR="#ffffff">
<DIV CLASS="HTMLBreadCrumbs"><A HREF="../../intro.htm">All Manuals</A> &gt; <A HREF="capiref.htm">CAPI Reference Manual</A> &gt; <A HREF="capiref-4.htm">1 CAPI Reference Entries</A><BR><BR>
</DIV><A HREF="capiref-332.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A><A HREF="capiref-330.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Prev BORDER=0></A><A HREF="capiref-4.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A><A HREF="capiref.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A><A HREF="capiref-2.htm"><IMG ALIGN=BOTTOM SRC=contents.gif ALT=Contents BORDER=0></A><A HREF="capiref-693.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A>
<H4 CLASS="REntry">
<A NAME="pgfId-907979"></A><A NAME="38382"></A>prompt<A NAME="marker-4211514"></A>-with-list</H4>
<DIV>
<H5 CLASS="REntry-type">
<A NAME="pgfId-908211"></A>Function</H5>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-907983"></A>Summary</H5>
<P CLASS="RBody">
<A NAME="pgfId-1152608"></A>Prompts the user to select an item or items from a <A HREF="capiref-33.htm#22482" CLASS="XRef">choice</A>.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-4211503"></A>Package</H5>
<P CLASS="RSignature">
<A NAME="pgfId-4211504"></A>capi</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-1152601"></A>Signature</H5>
<P CLASS="RSignature">
<A NAME="pgfId-907985"></A>prompt-with-list <EM CLASS="Variable">
items</EM>
 <EM CLASS="Variable">
message</EM>
 &amp;key <EM CLASS="Variable">
choice-class</EM>
 <EM CLASS="Variable">
interaction</EM>
 <EM CLASS="Variable">
value-function</EM>
 <EM CLASS="Variable">
pane-args</EM>
 <EM CLASS="Variable">
popup-args</EM>
 <EM CLASS="Variable">
continuation</EM>
 <EM CLASS="Variable">
buttons</EM>
 <EM CLASS="Variable">
callbacks</EM>
 <EM CLASS="Variable">
all-button</EM>
 <EM CLASS="Variable">
none-button</EM>
 =&gt; <EM CLASS="Variable">
result,</EM>
 <EM CLASS="Variable">
successp</EM>
</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-3095931"></A>Arguments</H5>
<P CLASS="RDescription-Item">
<A NAME="pgfId-3096687"></A><EM CLASS="Variable">
items</EM>
</P>
<P CLASS="RDescription-C">A sequence.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-3096720"></A><EM CLASS="Variable">
message</EM>
</P>
<P CLASS="RDescription-C">A string.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-3096724"></A><EM CLASS="Variable">
choice-class</EM>
</P>
<P CLASS="RDescription-C">A class name.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-3096741"></A><EM CLASS="Variable">
interaction</EM>
</P>
<P CLASS="RDescription-C">One of <CODE CLASS="Code">
:single-selection</CODE>
, <CODE CLASS="Code">
:multiple-selection</CODE>
, or <CODE CLASS="Code">
:extended-selection</CODE>
.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-3096782"></A><EM CLASS="Variable">
value-function</EM>
</P>
<P CLASS="RDescription-C">A function, or <CODE CLASS="Code">
nil</CODE>
.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-6679768"></A><EM CLASS="Variable">
pane-args</P>
<P CLASS="RDescription-C"></EM>
Arguments to pass to the pane.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-6679769"></A><EM CLASS="Variable">
popup-args</P>
<P CLASS="RDescription-C">Arguments to pass to the confirmer.</EM>
</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-6679773"></A><EM CLASS="Variable">
continuation</EM>
</P>
<P CLASS="RDescription-C">A function or <CODE CLASS="Code">
nil</CODE>
.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-10385660"></A><A NAME="marker-10388031"></A><EM CLASS="Variable">
buttons</EM>
</P>
<P CLASS="RDescription-C">A list of strings or the keyword <CODE CLASS="Code">
:none</CODE>
.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-10385661"></A><A NAME="marker-10388036"></A><EM CLASS="Variable">
callbacks</EM>
</P>
<P CLASS="RDescription-C">A list of callback specs.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-10385662"></A><A NAME="marker-10388041"></A><EM CLASS="Variable">
all-button</EM>
</P>
<P CLASS="RDescription-C">A string, <CODE CLASS="Code">
nil</CODE>
 or <CODE CLASS="Code">
t</CODE>
.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-10385663"></A><A NAME="marker-10388046"></A><EM CLASS="Variable">
none-button</EM>
</P>
<P CLASS="RDescription-C">A string, <CODE CLASS="Code">
nil</CODE>
 or <CODE CLASS="Code">
t</CODE>
.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-6679770"></A>Description</H5>
<P CLASS="RBody">
<A NAME="pgfId-907992"></A>The function <CODE CLASS="Code">
prompt-with-list</CODE>
 prompts the user with a <A HREF="capiref-33.htm#22482" CLASS="XRef">choice</A>. The user's selection is normally returned by the prompter.</P>
<P CLASS="RBody">
<A NAME="pgfId-3092319"></A><EM CLASS="Variable">
items</EM>
 supplies the items of the <A HREF="capiref-33.htm#22482" CLASS="XRef">choice</A>.</P>
<P CLASS="RBody">
<A NAME="pgfId-3096772"></A><EM CLASS="Variable">
message</EM>
 supplies a title for the <A HREF="capiref-33.htm#22482" CLASS="XRef">choice</A>.</P>
<P CLASS="RBody">
<A NAME="pgfId-3098361"></A><EM CLASS="Variable">
choice-class</EM>
 determines the type of <A HREF="capiref-33.htm#22482" CLASS="XRef">choice</A> used in the dialog. <EM CLASS="Variable">
choice-class</EM>
 defaults to <A HREF="capiref-214.htm#30299" CLASS="XRef">list-panel</A>, and must be a sublass of <A HREF="capiref-33.htm#22482" CLASS="XRef">choice</A>.</P>
<P CLASS="RBody">
<A NAME="pgfId-3098743"></A><EM CLASS="Variable">
interaction</EM>
 determines the interaction style of the <A HREF="capiref-33.htm#22482" CLASS="XRef">choice</A> in the dialog. By default <EM CLASS="Variable">
interaction</EM>
 is <CODE CLASS="Code">
:single-selection</CODE>
. For single selection, the dialog has an <B CLASS="Button">
OK</B>
 and a <B CLASS="Button">
Cancel</B>
 button, while for other selection styles it has <B CLASS="Button">
Yes</B>
, <B CLASS="Button">
No</B>
 and <B CLASS="Button">
Cancel</B>
 buttons where <B CLASS="Button">
Yes</B>
 means accept the selection, <B CLASS="Button">
No</B>
 means accept a null selection and <B CLASS="Button">
Cancel</B>
 behaves as normal. Note that <EM CLASS="Variable">
interaction</EM>
 <CODE CLASS="Code">
:multiple-selection</CODE>
 is not supported for lists on Mac OS X.</P>
<P CLASS="RBody">
<A NAME="pgfId-3097221"></A>The primary returned value is usually the selected items, but a <EM CLASS="Variable">
value-function</EM>
 can be supplied that gets passed the result and can then return a new result. If <EM CLASS="Variable">
value-function</EM>
 is <CODE CLASS="Code">
nil</CODE>
 (this is the default), then <EM CLASS="Variable">
result</EM>
 is simply the selection.</P>
<P CLASS="RBody">
<A NAME="pgfId-6679775"></A>If <A NAME="marker-6691378"></A><EM CLASS="Variable">
continuation</EM>
 is non-nil, then it must be a function with a lambda list that accepts two arguments. The <EM CLASS="Variable">
continuation</EM>
 function is called with the values that would normally be returned by <CODE CLASS="Code">
prompt-with-list</CODE>
. On Cocoa, passing <EM CLASS="Variable">
continuation</EM>
 causes the dialog to be made as a window-modal sheet and <CODE CLASS="Code">
prompt-with-list</CODE>
 returns immediately, leaving the dialog on the screen. The <A HREF="capiref-482.htm#92889" CLASS="XRef">with-dialog-results</A> macro provides a convenient way to create a <EM CLASS="Variable">
continuation</EM>
 function.</P>
<P CLASS="RBody">
<A NAME="pgfId-10391209"></A>In addition to the choice showing the items, <CODE CLASS="Code">
prompt-with-list</CODE>
 can also display a panel of push buttons (the &quot;action buttons&quot;) which perform actions related to the choice. Note that these buttons are separated from the &quot;dialog buttons&quot; such as <B CLASS="Button">
OK</B>
 and <B CLASS="Button">
Cancel</B>
. The dialog buttons are controlled separately by keywords in <EM CLASS="Variable">
popup-args</EM>
.</P>
<P CLASS="RBody">
<A NAME="pgfId-10388053"></A>By default, <CODE CLASS="Code">
prompt-with-list</CODE>
 does not display action buttons. However, if <EM CLASS="Variable">
interaction</EM>
 is <CODE CLASS="Code">
:multiple-selection</CODE>
, the default behavior is to display two action buttons, <B CLASS="Button">
All</B>
 and <B CLASS="Button">
None</B>
. These change the selection to all of the items or none of the items respectively.</P>
<P CLASS="RBody">
<A NAME="pgfId-10388054"></A>When <EM CLASS="Variable">
buttons</EM>
 is <CODE CLASS="Code">
:none</CODE>
, it specifies no action buttons in any case (including no <B CLASS="Button">
All</B>
 and <B CLASS="Button">
None</B>
 buttons). Otherwise <EM CLASS="Variable">
buttons</EM>
 must be a list of strings specifying additional action buttons. Each of the strings specifies a button, and the string is displayed in the button.</P>
<P CLASS="RBody">
<A NAME="pgfId-10388055"></A><EM CLASS="Variable">
callbacks</EM>
 specifies the callbacks of the buttons. It should be a list of callback specifiers matching the list in <EM CLASS="Variable">
buttons</EM>
. Each callback specifier is either a callable (a function or a symbol) which takes one argument, the choice, or a list where the <CODE CLASS="Code">
car</CODE>
 is a callable which is called as follows:</P>
<CODE CLASS="RCode-line">
<A NAME="pgfId-10388056"></A>(apply (car <EM CLASS="Variable">
callback-spec</EM>
) choice (cdr <EM CLASS="Variable">
callback-spec</EM>
))</CODE>
<P CLASS="RBody">
<A NAME="pgfId-10388050"></A>When <EM CLASS="Variable">
all-button</EM>
 and <EM CLASS="Variable">
none-button</EM>
 are supplied they override the default behavior of the <B CLASS="Button">
All</B>
 and <B CLASS="Button">
None</B>
 buttons. If <EM CLASS="Variable">
all-button</EM>
 (<EM CLASS="Variable">
none-button</EM>
) is <CODE CLASS="Code">
nil</CODE>
, then <B CLASS="Button">
All</B>
 (<B CLASS="Button">
None</B>
) is not displayed. If <EM CLASS="Variable">
all-button</EM>
 (<EM CLASS="Variable">
none-button</EM>
) is non-nil and <EM CLASS="Variable">
buttons</EM>
 is not <CODE CLASS="Code">
:none</CODE>
, the <B CLASS="Button">
All</B>
 (<B CLASS="Button">
None</B>
) button is displayed, and if the value is string, that string is used instead of the default string.</P>
<P CLASS="RBody">
<A NAME="pgfId-3097226"></A>The prompter is created by passing an appropriate pane (in this case an instance of class <EM CLASS="Variable">
choice-class</EM>
) to <A HREF="capiref-300.htm#12695" CLASS="XRef">popup-confirmer</A>. Arguments can be passed to the <CODE CLASS="Code">
make-instance</CODE>
 of the pane and the call to <A HREF="capiref-300.htm#12695" CLASS="XRef">popup-confirmer</A> using <EM CLASS="Variable">
pane-args</EM>
 and <EM CLASS="Variable">
popup-args</EM>
 respectively. The initial selection can be specified using <A HREF="capiref-33.htm#22482" CLASS="XRef">choice</A> initargs <CODE CLASS="Code">
:selection</CODE>
, <CODE CLASS="Code">
:selected-item</CODE>
 or <CODE CLASS="Code">
:selected-items</CODE>
 in <EM CLASS="Variable">
pane-args</EM>
.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-908007"></A>Example</H5>
<PRE CLASS="RCode-first"><A NAME="pgfId-908009"></A>(capi:prompt-with-list</PRE>
<PRE CLASS="RCode-last"><A NAME="pgfId-908010"></A>  '(1 2 3 4 5) &quot;Select an item:&quot;)</PRE>
<PRE CLASS="RCode-first"><A NAME="pgfId-1708471"></A>(capi:prompt-with-list</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-1708472"></A> '(1 2 3 4 5) &quot;Select some items:&quot;</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-1708473"></A> :interaction :multiple-selection</PRE>
<PRE CLASS="RCode-last"><A NAME="pgfId-908022"></A> :selection '(0 2 4))</PRE>
<PRE CLASS="RCode-first"><A NAME="pgfId-908029"></A>(capi:prompt-with-list</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-908030"></A> '(1 2 3 4 5) &quot;Select an item:&quot;</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-908031"></A> :interaction :multiple-selection</PRE>
<PRE CLASS="RCode-last"><A NAME="pgfId-908032"></A> :choice-class 'capi:button-panel)</PRE>
<PRE CLASS="RCode-first"><A NAME="pgfId-908037"></A>(capi:prompt-with-list</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-908038"></A>  '(1 2 3 4 5) &quot;Select an item:&quot;</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-908039"></A>  :interaction :multiple-selection</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-908040"></A>  :choice-class 'capi:button-panel</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-908041"></A>  :pane-args </PRE>
<PRE CLASS="RCode-last"><A NAME="pgfId-908072"></A>  '(:layout-class capi:column-layout))</PRE>
<P CLASS="RBody">
<A NAME="pgfId-10263536"></A>There is a more complex example in</P>
<CODE CLASS="RCode-line">
<A NAME="pgfId-10264005"></A>examples/capi/choice/prompt-with-buttons.lisp</CODE>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-908046"></A>See also</H5>
<P CLASS="RBody">
<A NAME="pgfId-908048"></A><A HREF="capiref-300.htm#12695" CLASS="XRef">popup-confirmer</A><BR>
<A HREF="capiref-214.htm#30299" CLASS="XRef">list-panel</A> <BR>
<A HREF="capiref-33.htm#22482" CLASS="XRef">choice</A></P>
</DIV>
<HR>
<P CLASS="Copyrighttext-small"><I CLASS="Italic">CAPI Reference Manual - 15 Dec 2011</I></P>
<P><A HREF="capiref-332.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A><A HREF="capiref-330.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Prev BORDER=0></A><A HREF="capiref-4.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A><A HREF="capiref.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A><A HREF="capiref-2.htm"><IMG ALIGN=BOTTOM SRC=contents.gif ALT=Contents BORDER=0></A><A HREF="capiref-693.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A>
</BODY>
</HTML>
