<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 6.0/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="capiref.css" CHARSET="ISO-8859-1" TYPE="text/css">
<TITLE>
 graph-pane
</TITLE>

<LINK REL="next" HREF="capiref-163.htm" TYPE="text/html">
<LINK REL="prev" HREF="capiref-161.htm" TYPE="text/html">
<LINK REL="up" HREF="capiref-4.htm" TYPE="text/html">
<LINK REL="top" HREF="capiref.htm" TYPE="text/html">
<LINK REL="contents" HREF="capiref-2.htm" TYPE="text/html">
<LINK REL="index" HREF="capiref-693.htm" TYPE="text/html">
</HEAD>
<BODY BGCOLOR="#ffffff">
<DIV CLASS="HTMLBreadCrumbs"><A HREF="../../intro.htm">All Manuals</A> &gt; <A HREF="capiref.htm">CAPI Reference Manual</A> &gt; <A HREF="capiref-4.htm">1 CAPI Reference Entries</A><BR><BR>
</DIV><A HREF="capiref-163.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A><A HREF="capiref-161.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Prev BORDER=0></A><A HREF="capiref-4.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A><A HREF="capiref.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A><A HREF="capiref-2.htm"><IMG ALIGN=BOTTOM SRC=contents.gif ALT=Contents BORDER=0></A><A HREF="capiref-693.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A>
<H4 CLASS="REntry">
<A NAME="pgfId-895252"></A><A NAME="26475"></A>graph<A NAME="marker-4106693"></A>-pane</H4>
<DIV>
<H5 CLASS="REntry-type">
<A NAME="pgfId-895667"></A>Class</H5>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-895256"></A>Summary</H5>
<P CLASS="RBody">
<A NAME="pgfId-895258"></A>A graph pane is a pane that displays a hierarchy of items in a graph.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-4106670"></A>Package</H5>
<P CLASS="RSignature">
<A NAME="pgfId-4106671"></A>capi</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-895260"></A>Superclasses</H5>
<P CLASS="RBody">
<A NAME="pgfId-895262"></A><A HREF="capiref-413.htm#14273" CLASS="XRef">simple-pinboard-layout</A><BR>
<A HREF="capiref-33.htm#22482" CLASS="XRef">choice</A></P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-3247950"></A>Subclasses</H5>
<P CLASS="RBody">
<A NAME="pgfId-3248030"></A><A HREF="capiref-407.htm#17801" CLASS="XRef">simple-network-pane</A></P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-895266"></A>Initargs</H5>
<P CLASS="RDescription-Item">
<A NAME="pgfId-895268"></A><CODE CLASS="Code">
:roots</CODE>
<A NAME="marker-952843"></A></P>
<P CLASS="RDescription-C">The roots of the graph.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-895269"></A><CODE CLASS="Code">
:children-function</CODE>
<A NAME="marker-952844"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-895573"></A>Returns the children of a node.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-895270"></A><CODE CLASS="Code">
:layout-function</CODE>
<A NAME="marker-952845"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-895678"></A>A keyword denoting how to layout the nodes.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-6120285"></A><CODE CLASS="Code">
:layout-x-adjust</CODE>
<A NAME="marker-6120284"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-6120286"></A>The adjust value for the <EM CLASS="Variable">
x</EM>
 direction.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-6120291"></A><CODE CLASS="Code">
:layout-y-adjust</CODE>
<A NAME="marker-6120290"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-6124125"></A>The adjust value for the <EM CLASS="Variable">
y</EM>
 direction.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-895271"></A><CODE CLASS="Code">
:node-pinboard-class</CODE>
<A NAME="marker-952846"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-895570"></A>The class of pane to represent nodes.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-895272"></A><CODE CLASS="Code">
:edge-pinboard-class</CODE>
<A NAME="marker-952847"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-895571"></A>The class of pane to represent edges.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-895273"></A><CODE CLASS="Code">
:node-pane-function</CODE>
<A NAME="marker-952848"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-895572"></A>A function to return a pane for each node.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-895275"></A>Accessors</H5>
<P CLASS="RSignature">
<A NAME="pgfId-3773366"></A><A NAME="marker-3773365"></A>graph-pane-layout-function<BR>
<A NAME="marker-3773367"></A>graph-pane-roots</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-3773368"></A>Description</H5>
<P CLASS="RBody">
<A NAME="pgfId-895281"></A>A graph pane calculates the items of the graph by calling the <CODE CLASS="Code">
</CODE>
<EM CLASS="Variable">
children-function</EM>
 on each of its <EM CLASS="Variable">
roots</EM>
, and then calling it again on each of the children recursively until no more children are found. The <EM CLASS="Variable">
children-function</EM>
 gets called with an item of the graph and should return a list of the children of that item. </P>
<P CLASS="RBody">
<A NAME="pgfId-3258845"></A>Each item is represented by a node in the graph.</P>
<P CLASS="RBody">
<A NAME="pgfId-895285"></A>The <EM CLASS="Variable">
layout-function</EM>
 tells the graph pane how to lay out its nodes. It can be one these values: </P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-895287"></A><CODE CLASS="Code">
:left-right</CODE>
</P>
<P CLASS="RDescription-C">Lay the graph out from the left to the right.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-895288"></A><CODE CLASS="Code">
:top-down</CODE>
</P>
<P CLASS="RDescription-C">Lay the graph out from the top down.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-1608391"></A><CODE CLASS="Code">
:right-left</CODE>
</P>
<P CLASS="RDescription-C">Lay the graph out from the right to the left.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-1608398"></A><CODE CLASS="Code">
:bottom-up</CODE>
</P>
<P CLASS="RDescription-C">Lay the graph out from the bottom up.</P>
<P CLASS="RBody">
<A NAME="pgfId-6120502"></A><EM CLASS="Variable">
layout-x-adjust</EM>
 and <EM CLASS="Variable">
layout-y-adjust</EM>
 act on the underlying layout to decide where to place the nodes. The values should be a keyword or a list of the form <CODE CLASS="Code">
(</CODE>
<EM CLASS="Variable">
keyword</EM>
<CODE CLASS="Code">
 </CODE>
<EM CLASS="Variable">
n</EM>
<CODE CLASS="Code">
)</CODE>
 where <EM CLASS="Variable">
n</EM>
 is an integer. These values of <EM CLASS="Variable">
adjust</EM>
 are interpreted as by <A HREF="capiref-279.htm#57877" CLASS="XRef">pane-adjusted-position</A>. <CODE CLASS="Code">
:top</CODE>
 is the default for <EM CLASS="Variable">
layout-y-adjust</EM>
 and <CODE CLASS="Code">
:left</CODE>
 is the default for <EM CLASS="Variable">
layout-x-adjust</EM>
.</P>
<P CLASS="RBody">
<A NAME="pgfId-2578893"></A>When a graph pane wants to display nodes and edges, it creates instances of <EM CLASS="Variable">
node-pinboard-class</EM>
 and <CODE CLASS="Code">
</CODE>
<EM CLASS="Variable">
edge-pinboard-class </EM>
which default to <A HREF="capiref-208.htm#11429" CLASS="XRef">item-pinboard-object</A> and <A HREF="capiref-212.htm#27294" CLASS="XRef">line-pinboard-object</A> respectively. These classes must be subclasses of <A HREF="capiref-408.htm#40919" CLASS="XRef">simple-pane</A> or <A HREF="capiref-294.htm#24563" CLASS="XRef">pinboard-object</A>, and there are some examples of the use of these keywords below. </P>
<P CLASS="RBody">
<A NAME="pgfId-2579251"></A>The <EM CLASS="Variable">
node-pane-function</EM>
 is called to create a pane for each node, and by default it creates an instance of <CODE CLASS="Code">
</CODE>
<EM CLASS="Variable">
node-pinboard-class</EM>
. It gets passed the graph pane and the item corresponding to the node, and should return an instance of a subclass of <A HREF="capiref-408.htm#40919" CLASS="XRef">simple-pane</A> or <A HREF="capiref-294.htm#24563" CLASS="XRef">pinboard-object</A>.</P>
<P CLASS="RBody">
<A NAME="pgfId-3931818"></A>To expand or contract a node, the user clicks on the circle next to the node. An expandable node has a unfilled circle and a collapsable node has a filled circle.</P>
<P CLASS="RBody">
<A NAME="pgfId-2579371"></A><CODE CLASS="Code">
graph-pane</CODE>
 is a subclass of <A HREF="capiref-33.htm#22482" CLASS="XRef">choice</A>, so for details of its selection handling, see <A HREF="capiref-33.htm#22482" CLASS="XRef">choice</A>.</P>
<P CLASS="RBody">
<A NAME="pgfId-6859793"></A>The highlighting of the children is controlled as described for <A HREF="capiref-293.htm#24209" CLASS="XRef">pinboard-layout</A>, but for <CODE CLASS="Code">
graph-pane</CODE>
 the default value of <EM CLASS="Variable">
highlight-style</EM>
 is <CODE CLASS="Code">
:standard</CODE>
.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-10065849"></A>Notes</H5>
<P CLASS="RBody">
<A NAME="pgfId-10065934"></A><EM CLASS="Variable">
</EM>
<A NAME="marker-10340690"></A>The <A HREF="capiref-275.htm#35026" CLASS="XRef">output-pane</A> initarg <CODE CLASS="Code">
:drawing-mode</CODE>
<A NAME="marker-10065933"></A> controls quality of drawing in a <CODE CLASS="Code">
graph-pane</CODE>
, including anti-aliasing of any text displayed on Microsoft Windows and GTK+.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-3928728"></A>Compatibility note</H5>
<P CLASS="RBody">
<A NAME="pgfId-3931609"></A>In LispWorks 4.3 the double click gesture on a <CODE CLASS="Code">
graph-pane</CODE>
 node always calls the <EM CLASS="Variable">
action-callback</EM>
, and the user gesture to expand or collapse a node is to click on the circle drawn alongside the node. </P>
<P CLASS="RBody">
<A NAME="pgfId-3931652"></A>In LispWorks 4.2 and previous versions, the double click gesture was used for expansion and contraction of nodes and the <EM CLASS="Variable">
action-callback</EM>
 was not always called.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-2579255"></A>Example</H5>
<PRE CLASS="RCode-first"><A NAME="pgfId-4337685"></A>(defun node-children (node)</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4337686"></A>  (when (&lt; node 16)</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4337687"></A>    (list (* node 2)</PRE>
<PRE CLASS="RCode-last"><A NAME="pgfId-4337688"></A>          (1+ (* node 2)))))</PRE>
<PRE CLASS="RCode-first"><A NAME="pgfId-4757295"></A>(setq graph </PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4757296"></A>      (capi:contain</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4757297"></A>       (make-instance 'capi:graph-pane</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4757298"></A>                      :roots '(1)</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4757299"></A>                      :children-function</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4757300"></A>                      'node-children)</PRE>
<PRE CLASS="RCode-last"><A NAME="pgfId-4337696"></A>       :best-width 300 :best-height 400))</PRE>
<PRE CLASS="RCode-first"><A NAME="pgfId-4337698"></A>(capi:apply-in-pane-process </PRE>
<PRE CLASS="RCode-last"><A NAME="pgfId-4337699"></A> graph #'(setf capi:graph-pane-roots) '(2 6) graph)</PRE>
<PRE CLASS="RCode-first"><A NAME="pgfId-4757234"></A>(capi:contain </PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4757235"></A> (make-instance 'capi:graph-pane</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4757236"></A>                :roots '(1)</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4757237"></A>                :children-function </PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4757238"></A>                'node-children</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4757239"></A>                :layout-function :top-down)</PRE>
<PRE CLASS="RCode-last"><A NAME="pgfId-4337706"></A> :best-width 300 :best-height 400)</PRE>
<PRE CLASS="RCode-first"><A NAME="pgfId-4757214"></A>(capi:contain</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4757215"></A> (make-instance 'capi:graph-pane</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4757216"></A>                :roots '(1)</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4757217"></A>                :children-function </PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4757218"></A>                'node-children</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4757219"></A>                :layout-function :top-down</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4757220"></A>                :layout-x-adjust :left)</PRE>
<PRE CLASS="RCode-last"><A NAME="pgfId-4337683"></A> :best-width 300 :best-height 400)</PRE>
<P CLASS="RBody">
<A NAME="pgfId-895341"></A>This example demonstrates a different style of graph output with right-angle edges and parent nodes being adjusted towards the top instead of at the center. </P>
<PRE CLASS="RCode-first"><A NAME="pgfId-6124173"></A>(capi:contain </PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-6124174"></A> (make-instance</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-6124175"></A>  'capi:graph-pane</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-6124176"></A>  :roots '(1)</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-6124177"></A>  :children-function 'node-children</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-6124178"></A>  :layout-y-adjust '(:top 10)</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-6124179"></A>  :edge-pinboard-class</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-6124180"></A>  'capi:right-angle-line-pinboard-object)</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-6124181"></A> :best-width 300</PRE>
<PRE CLASS="RCode-last"><A NAME="pgfId-1049976"></A> :best-height 400)</PRE>
<P CLASS="RBody">
<A NAME="pgfId-895356"></A>This example demonstrates the use of <CODE CLASS="Code">
:node-pinboard-class</CODE>
 to specify that the nodes are drawn as push buttons. </P>
<PRE CLASS="RCode-first"><A NAME="pgfId-4756409"></A>(capi:contain </PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4756410"></A> (make-instance</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4756411"></A>  'capi:graph-pane</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4756412"></A>  :roots '(1)</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4756413"></A>  :children-function 'node-children</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4756414"></A>  :node-pinboard-class 'capi:push-button)</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4756415"></A> :best-width 300</PRE>
<PRE CLASS="RCode-last"><A NAME="pgfId-1050035"></A> :best-height 400)</PRE>
<P CLASS="RBody">
<A NAME="pgfId-3469267"></A>There are more examples in the directory <CODE CLASS="Code">
examples/capi/graphics/</CODE>
.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-895373"></A>See also</H5>
<P CLASS="RBody">
<A NAME="pgfId-895375"></A><A HREF="capiref-208.htm#11429" CLASS="XRef">item-pinboard-object</A><BR>
<A HREF="capiref-212.htm#27294" CLASS="XRef">line-pinboard-object</A><BR>
<A HREF="capiref-275.htm#35026" CLASS="XRef">output-pane</A></P>
</DIV>
<HR>
<P CLASS="Copyrighttext-small"><I CLASS="Italic">CAPI Reference Manual - 15 Dec 2011</I></P>
<P><A HREF="capiref-163.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A><A HREF="capiref-161.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Prev BORDER=0></A><A HREF="capiref-4.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A><A HREF="capiref.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A><A HREF="capiref-2.htm"><IMG ALIGN=BOTTOM SRC=contents.gif ALT=Contents BORDER=0></A><A HREF="capiref-693.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A>
</BODY>
</HTML>
