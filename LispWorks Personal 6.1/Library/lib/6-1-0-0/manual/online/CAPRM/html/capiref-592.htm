<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 6.0/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="capiref.css" CHARSET="ISO-8859-1" TYPE="text/css">
<TITLE>
 load-image
</TITLE>

<LINK REL="next" HREF="capiref-593.htm" TYPE="text/html">
<LINK REL="prev" HREF="capiref-591.htm" TYPE="text/html">
<LINK REL="up" HREF="capiref-495.htm" TYPE="text/html">
<LINK REL="top" HREF="capiref.htm" TYPE="text/html">
<LINK REL="contents" HREF="capiref-2.htm" TYPE="text/html">
<LINK REL="index" HREF="capiref-693.htm" TYPE="text/html">
</HEAD>
<BODY BGCOLOR="#ffffff">
<DIV CLASS="HTMLBreadCrumbs"><A HREF="../../intro.htm">All Manuals</A> &gt; <A HREF="capiref.htm">CAPI Reference Manual</A> &gt; <A HREF="capiref-495.htm">2 GP Reference Entries</A><BR><BR>
</DIV><A HREF="capiref-593.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A><A HREF="capiref-591.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Prev BORDER=0></A><A HREF="capiref-495.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A><A HREF="capiref.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A><A HREF="capiref-2.htm"><IMG ALIGN=BOTTOM SRC=contents.gif ALT=Contents BORDER=0></A><A HREF="capiref-693.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A>
<H4 CLASS="REntry">
<A NAME="pgfId-1019792"></A><A NAME="marker-1019790"></A><A NAME="43526"></A>load-image</H4>
<DIV>
<H5 CLASS="REntry-type">
<A NAME="pgfId-890452"></A>Function</H5>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-890453"></A>Summary</H5>
<P CLASS="RBody">
<A NAME="pgfId-890454"></A>Loads an image and returns the image object.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-1090836"></A>Package</H5>
<P CLASS="RSignature">
<A NAME="pgfId-1090837"></A><CODE CLASS="Code">
graphics-ports</CODE>
</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-890455"></A>Signature</H5>
<P CLASS="RSignature">
<A NAME="pgfId-890456"></A>load-image <EM CLASS="Variable">
gp</EM>
 <EM CLASS="Variable">
id</EM>
 &amp;key <EM CLASS="Variable">
cache</EM>
 <EM CLASS="Variable">
type</EM>
 <EM CLASS="Variable">
editable</EM>
 <EM CLASS="Variable">
image-translation-table</EM>
 =&gt; <EM CLASS="Variable">
image</EM>
</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-890457"></A>Arguments</H5>
<P CLASS="RDescription-Item">
<A NAME="pgfId-890458"></A><EM CLASS="Variable">
gp</EM>
</P>
<P CLASS="RDescription-C">A graphics port.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-897329"></A><EM CLASS="Variable">
id</P>
<P CLASS="RDescription-C"></EM>
An image identifier, a file, an <A HREF="capiref-537.htm#53640" CLASS="XRef">external-image</A>, or an <A HREF="capiref-574.htm#77313" CLASS="XRef">image</A>.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-951334"></A><EM CLASS="Variable">
cache</EM>
</P>
<P CLASS="RDescription-C">A boolean.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-1152779"></A><EM CLASS="Variable">
type</EM>
</P>
<P CLASS="RDescription-C">A keyword, or <CODE CLASS="Code">
nil</CODE>
.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-1160756"></A><EM CLASS="Variable">
editable</EM>
</P>
<P CLASS="RDescription-C">One of the keywords <CODE CLASS="Code">
:with-alpha</CODE>
 and <CODE CLASS="Code">
:without-alpha</CODE>
, or a boolean.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-897330"></A><EM CLASS="Variable">
image-translation-table</EM>
 </P>
<P CLASS="RDescription-C">
<A NAME="pgfId-897331"></A>An image translation table.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-890459"></A>Values</H5>
<P CLASS="RDescription-Item">
<A NAME="pgfId-890460"></A><EM CLASS="Variable">
image</EM>
</P>
<P CLASS="RDescription-C">An image object.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-890461"></A>Description</H5>
<P CLASS="RBody">
<A NAME="pgfId-890462"></A>The <CODE CLASS="Code">
load-image</CODE>
 function loads an image identified by <EM CLASS="Variable">
id</EM>
 via the <EM CLASS="Variable">
image-translation-table</EM>
 using the image load function registered with it. It returns an <A HREF="capiref-574.htm#77313" CLASS="XRef">image</A> object with the representation slot initialized. The <EM CLASS="Variable">
gp</EM>
 argument specifies a graphics port used to identify the library. It also specifies the resource in which colors are defined and if necessary allocated for the image. If <EM CLASS="Variable">
id</EM>
 is in the table but the translation is not an external image, and the image loader returns an external image as the second value, that external image replaces the translation in the table. The default value of <EM CLASS="Variable">
image-translation-table</EM>
 is <A HREF="capiref-516.htm#78426" CLASS="XRef">*default-image-translation-table*</A>.</P>
<P CLASS="RBody">
<A NAME="pgfId-1165565"></A><EM CLASS="Variable">
id</EM>
 can be an <A HREF="capiref-574.htm#77313" CLASS="XRef">image</A>, which is just associated with the port <EM CLASS="Variable">
gp</EM>
 and returned if it is a Plain Image or if <EM CLASS="Variable">
editable</EM>
 is <CODE CLASS="Code">
nil</CODE>
. Otherwise a new Plain Image object is returned, as described below.</P>
<P CLASS="RBody">
<A NAME="pgfId-1155329"></A><EM CLASS="Variable">
id</EM>
 can also be a string or pathname denoting a file, and in this case the image is loaded according to <EM CLASS="Variable">
type</EM>
, as described below.</P>
<P CLASS="RBody">
<A NAME="pgfId-951349"></A>The <EM CLASS="Variable">
cache</EM>
 argument controls whether the image translation is cached. See the <A HREF="capiref-509.htm#31083" CLASS="XRef">convert-external-image</A> function for more details.</P>
<P CLASS="RBody">
<A NAME="pgfId-1152796"></A><EM CLASS="Variable">
type</EM>
 tells <CODE CLASS="Code">
load-image</CODE>
 that the image is in a particular graphics format. Currently the only recognised value is <CODE CLASS="Code">
:bmp</CODE>
, which means the image is a Bitmap. Other values of <EM CLASS="Variable">
type</EM>
 cause <CODE CLASS="Code">
load-image</CODE>
 to load the image according to the file type of <EM CLASS="Variable">
id,</EM>
 if <EM CLASS="Variable">
id</EM>
 denotes a file, as described for <A HREF="capiref-616.htm#53822" CLASS="XRef">read-external-image</A>. See the Graphics Ports chapter in the <I CLASS="Italic">
CAPI User Guide</I>
 for a discussion of image handling. The default value of <EM CLASS="Variable">
type</EM>
 is <CODE CLASS="Code">
nil</CODE>
.</P>
<P CLASS="RBody">
<A NAME="pgfId-1160822"></A><EM CLASS="Variable">
editable</EM>
 controls whether the image <EM CLASS="Variable">
image</EM>
 is a Plain Image suitable for use with the Image Access API. The values of <EM CLASS="Variable">
editable</EM>
 have the following effects:</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-1245090"></A><CODE CLASS="Code">
nil</CODE>
</P>
<P CLASS="RDescription-C">The image is not editable.</P>
<P CLASS="RDescription">
<A NAME="pgfId-1245092"></A><CODE CLASS="Code">
:without-alpha</CODE>
</P>
<P CLASS="RDescription-C">
<A NAME="pgfId-1245953"></A>The image is editable, but does not have an alpha channel.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-1245963"></A><CODE CLASS="Code">
t</CODE>
</P>
<P CLASS="RDescription-C">The image is editable, but does not have an alpha channel if the source of the image has an alpha channel (for example, a TIFF file with alpha channel).</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-1247860"></A><CODE CLASS="Code">
:with-alpha</CODE>
</P>
<P CLASS="RDescription-C">The image is editable and has an alpha channel. It will be fully opaque when loading files without an alpha channel.</P>
<P CLASS="RBody">
<A NAME="pgfId-1245857"></A>Given an <A HREF="capiref-574.htm#77313" CLASS="XRef">image</A> <EM CLASS="Variable">
my-image</EM>
, call</P>
<CODE CLASS="RCode-line">
<A NAME="pgfId-1162347"></A>(load-image <EM CLASS="Variable">
port</EM>
 <EM CLASS="Variable">
my-image</EM>
 :editable t)</CODE>
<P CLASS="RBody">
<A NAME="pgfId-1162407"></A>to create an <A HREF="capiref-574.htm#77313" CLASS="XRef">image</A> guaranteed to work with <A HREF="capiref-597.htm#99246" CLASS="XRef">make-image-access</A>. The default value of <EM CLASS="Variable">
editable</EM>
 is <CODE CLASS="Code">
nil</CODE>
.</P>
<P CLASS="RBody">
<A NAME="pgfId-1296912"></A>Normally the image is freed automatically, when <EM CLASS="Variable">
gp</EM>
 is destroyed. However there are circumstances where you need to explicitly free an image, for example when you want it to go away before the port. If the image is not freed, a memory leak occurs.</P>
<P CLASS="RBody">
<A NAME="pgfId-1226763"></A><B CLASS="Bold">
Note:</B>
 <EM CLASS="Variable">
gp</EM>
 must already be created at the time <CODE CLASS="Code">
load-image</CODE>
 is called. If you need to delay loading the image, for example if you are computing the image dynamically, then you can call <CODE CLASS="Code">
load-image</CODE>
 in the <EM CLASS="Variable">
create-callback</EM>
 of the port or even in its first <EM CLASS="Variable">
display-callback</EM>
.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-1244300"></A>Compatibility note</H5>
<P CLASS="RBody">
<A NAME="pgfId-1244908"></A>In LispWorks 4.4 there is a keyword argument <CODE CLASS="Code">
:force-plain</CODE>
 with the same effect as <CODE CLASS="Code">
:editable</CODE>
. <CODE CLASS="Code">
:force-plain</CODE>
 is still accepted in LispWorks 6.1 for backwards compatibility, but you should now use <CODE CLASS="Code">
:editable</CODE>
 instead.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-1013305"></A>See also</H5>
<P CLASS="RBody">
<A NAME="pgfId-1013748"></A><A HREF="capiref-509.htm#31083" CLASS="XRef">convert-external-image</A><BR>
<A HREF="capiref-516.htm#78426" CLASS="XRef">*default-image-translation-table*</A><BR>
<A HREF="capiref-591.htm#42391" CLASS="XRef">load-icon-image</A><BR>
<A HREF="capiref-596.htm#38942" CLASS="XRef">make-image</A><BR>
<A HREF="capiref-597.htm#99246" CLASS="XRef">make-image-access</A></P>
</DIV>
<HR>
<P CLASS="Copyrighttext-small"><I CLASS="Italic">CAPI Reference Manual - 15 Dec 2011</I></P>
<P><A HREF="capiref-593.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A><A HREF="capiref-591.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Prev BORDER=0></A><A HREF="capiref-495.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A><A HREF="capiref.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A><A HREF="capiref-2.htm"><IMG ALIGN=BOTTOM SRC=contents.gif ALT=Contents BORDER=0></A><A HREF="capiref-693.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A>
</BODY>
</HTML>
