<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 6.0/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="capiref.css" CHARSET="ISO-8859-1" TYPE="text/css">
<TITLE>
 collection
</TITLE>

<LINK REL="next" HREF="capiref-46.htm" TYPE="text/html">
<LINK REL="prev" HREF="capiref-44.htm" TYPE="text/html">
<LINK REL="up" HREF="capiref-4.htm" TYPE="text/html">
<LINK REL="top" HREF="capiref.htm" TYPE="text/html">
<LINK REL="contents" HREF="capiref-2.htm" TYPE="text/html">
<LINK REL="index" HREF="capiref-693.htm" TYPE="text/html">
</HEAD>
<BODY BGCOLOR="#ffffff">
<DIV CLASS="HTMLBreadCrumbs"><A HREF="../../intro.htm">All Manuals</A> &gt; <A HREF="capiref.htm">CAPI Reference Manual</A> &gt; <A HREF="capiref-4.htm">1 CAPI Reference Entries</A><BR><BR>
</DIV><A HREF="capiref-46.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A><A HREF="capiref-44.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Prev BORDER=0></A><A HREF="capiref-4.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A><A HREF="capiref.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A><A HREF="capiref-2.htm"><IMG ALIGN=BOTTOM SRC=contents.gif ALT=Contents BORDER=0></A><A HREF="capiref-693.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A>
<H4 CLASS="REntry">
<A NAME="pgfId-2298110"></A><A NAME="36673"></A>collection<A NAME="marker-3948753"></A></H4>
<DIV>
<H5 CLASS="REntry-type">
<A NAME="pgfId-1872602"></A>Class</H5>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887904"></A>Summary</H5>
<P CLASS="RBody">
<A NAME="pgfId-887906"></A>A <CODE CLASS="Code">
collection</CODE>
 collects together a set of items, and provides functionality for accessing and displaying them.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-3948742"></A>Package</H5>
<P CLASS="RSignature">
<A NAME="pgfId-3948743"></A>capi</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887908"></A>Superclasses</H5>
<P CLASS="RSignature">
<A NAME="pgfId-887910"></A><A HREF="capiref-29.htm#21205" CLASS="XRef">capi-object</A><BR>
<A HREF="capiref-26.htm#13019" CLASS="XRef">callbacks</A></P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887913"></A>Subclasses</H5>
<P CLASS="RSignature">
<A NAME="pgfId-887915"></A><A HREF="capiref-33.htm#22482" CLASS="XRef">choice</A></P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887917"></A>Initargs</H5>
<P CLASS="RDescription-Item">
<A NAME="pgfId-887919"></A><CODE CLASS="Code">
:items</CODE>
<A NAME="marker-952811"></A></P>
<P CLASS="RDescription-C">The items in the collection.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-887920"></A><CODE CLASS="Code">
:print-function</CODE>
<A NAME="marker-952812"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-888259"></A>A function that prints an item.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-887921"></A><CODE CLASS="Code">
:test-function</CODE>
<A NAME="marker-952813"></A></P>
<P CLASS="RDescription-C">A comparison function between two items.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-887922"></A><CODE CLASS="Code">
:items-count-function</CODE>
<A NAME="marker-952814"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-888258"></A>A function which returns the length of items.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-887923"></A><CODE CLASS="Code">
:items-get-function</CODE>
<A NAME="marker-952815"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-888260"></A>A function that returns the <EM CLASS="Variable">
n</EM>
th item.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-887924"></A><CODE CLASS="Code">
:items-map-function</CODE>
<A NAME="marker-952816"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-2753338"></A>A function that maps a function over the items.</P>
<P CLASS="RDescription">
<A NAME="pgfId-5694666"></A><CODE CLASS="Code">
:accepts-focus-p</CODE>
<A NAME="marker-5694665"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-5694676"></A>Specifies that the collection should accept input. The default value is <CODE CLASS="Code">
t</CODE>
.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-2753340"></A><CODE CLASS="Code">
:help-key</CODE>
<A NAME="marker-2753339"></A></P>
<P CLASS="RDescription-C">An object used for lookup of help.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-2753341"></A>Accessors</H5>
<P CLASS="RSignature">
<A NAME="pgfId-887928"></A><A NAME="marker-3760027"></A>collection-items<BR>
<A NAME="marker-3760092"></A>collection-print-function	<BR>
<A NAME="marker-3760079"></A>collection-test-function</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887932"></A>Readers</H5>
<P CLASS="RSignature">
<A NAME="pgfId-887934"></A><A NAME="marker-3760040"></A>collection-items-count-function<BR>
<A NAME="marker-3760053"></A>collection-items-get-function<BR>
<A NAME="marker-3760066"></A>collection-items-map-function<BR>
<A NAME="marker-3760105"></A>help-key</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887938"></A>Description</H5>
<P CLASS="RBody">
<A NAME="pgfId-5538365"></A>The main use of <CODE CLASS="Code">
collection</CODE>
 is as a part of the class <A HREF="capiref-33.htm#22482" CLASS="XRef">choice</A>, which provides selection capabilities on top of the collection handling, and which is used by list panels, button panels and menus amongst others. </P>
<P CLASS="RBody">
<A NAME="pgfId-5538366"></A>The items in the collection are printed by <A HREF="capiref-304.htm#48783" CLASS="XRef">print-collection-item</A>.</P>
<P CLASS="RBody">
<A NAME="pgfId-5538373"></A>Items can be instances of the CAPI class <CODE CLASS="Code">
item</CODE>
 or any Lisp object. The main difference is that non-CAPI items use the callbacks specified for the collection, whilst the CAPI <CODE CLASS="Code">
item</CODE>
s will use their callbacks in preference if these are specified.</P>
<P CLASS="RBody">
<A NAME="pgfId-887948"></A>By default, <EM CLASS="Variable">
items</EM>
 must be a sequence, but this can be changed by specifying <EM CLASS="Variable">
items-get-function</EM>
, <EM CLASS="Variable">
items-count-function</EM>
, and <EM CLASS="Variable">
items-map-function</EM>
.</P>
<P CLASS="RBody">
<A NAME="pgfId-2231241"></A><EM CLASS="Variable">
items-get-function</EM>
 should take as arguments the items and an index, and should return the indexed item. The default is <CODE CLASS="Code">
svref</CODE>
.</P>
<P CLASS="RBody">
<A NAME="pgfId-2231269"></A><EM CLASS="Variable">
items-count-function</EM>
 should take the items as an argument and should return the number of them. </P>
<P CLASS="RBody">
<A NAME="pgfId-2231302"></A><EM CLASS="Variable">
items-map-function</EM>
 should take as arguments the items, a function <EM CLASS="Variable">
function</EM>
 and a flag <EM CLASS="Variable">
collect-results-p</EM>
, and should call <EM CLASS="Variable">
function</EM>
 on each of the items in return. If <EM CLASS="Variable">
collect-results-p</EM>
 is non-nil, then it should also return the results of these calls in a list.</P>
<P CLASS="RBody">
<A NAME="pgfId-5747729"></A><EM CLASS="Variable">
test-function</EM>
 should be suitable for comparing the items in your collection. For example, if there are both strings and integers amongst your <EM CLASS="Variable">
items</EM>
, you should supply <EM CLASS="Variable">
test-function</EM>
 <CODE CLASS="Code">
equal</CODE>
.</P>
<P CLASS="RBody">
<A NAME="pgfId-2230778"></A>You can change the items using <CODE CLASS="Code">
(setf collection-items)</CODE>
. Note that there is an optimization <A HREF="capiref-11.htm#52257" CLASS="XRef">append-items</A> that is sometimes useful when adding items.</P>
<P CLASS="RBody">
<A NAME="pgfId-2753348"></A><EM CLASS="Variable">
accepts-focus-p</EM>
 and <EM CLASS="Variable">
help-key</EM>
 are intepreted as described in <A HREF="capiref-126.htm#29333" CLASS="XRef">element</A>.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-887955"></A>Example</H5>
<P CLASS="RBody">
<A NAME="pgfId-887957"></A>The following code uses <CODE CLASS="Code">
push-button-panel</CODE>
, a subclass of <CODE CLASS="Code">
collection</CODE>
.</P>
<PRE CLASS="RCode-first"><A NAME="pgfId-887959"></A>(capi:contain (make-instance 'capi:push-button-panel</PRE>
<PRE CLASS="RCode-last"><A NAME="pgfId-887961"></A>                             :items '(one two three)))</PRE>
<PRE CLASS="RCode-first"><A NAME="pgfId-887965"></A>(capi:contain (make-instance</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-887967"></A>               'capi:push-button-panel</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-887968"></A>               :items '(one two three)</PRE>
<PRE CLASS="RCode-last"><A NAME="pgfId-887969"></A>               :print-function 'string-capitalize))</PRE>
<P CLASS="RBody">
<A NAME="pgfId-887973"></A>The following example provides a collection with all values from 1 to 6 by providing an <EM CLASS="Variable">
items-get-function</EM>
 and an <CODE CLASS="Code">
</CODE>
<EM CLASS="Variable">
items-count-function</EM>
. </P>
<PRE CLASS="RCode-first"><A NAME="pgfId-887976"></A>(capi:contain (make-instance</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-887978"></A>               'capi:push-button-panel</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-887979"></A>               :items 6</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-887980"></A>               :items-get-function </PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-997651"></A>                 #'(lambda (items index) (1+ index))</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-887982"></A>               :items-count-function</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-997682"></A>                 #'(lambda (items) items)))</PRE>
<P CLASS="RBody">
<A NAME="pgfId-887987"></A>Here is an example demonstrating the use of CAPI items in a collections list of items to get more specific callbacks. </P>
<PRE CLASS="RCode-first"><A NAME="pgfId-887990"></A>(defun specific-callback (data interface)</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-887991"></A>  (capi:display-message &quot;Specific callback for &#126;S&quot; </PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-997799"></A>                        data))</PRE>
<PRE CLASS="RCode-first"><A NAME="pgfId-887997"></A>(defun generic-callback (data interface)</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-887998"></A>  (capi:display-message &quot;Ordinary callback for &#126;S&quot;</PRE>
<PRE CLASS="RCode-last"><A NAME="pgfId-1550383"></A>                        data))</PRE>
<PRE CLASS="RCode-first"><A NAME="pgfId-1560402"></A>(capi:contain (make-instance</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-1558609"></A>               'capi:list-panel</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-1558610"></A>               :items (list (make-instance</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-1558611"></A>                             'capi:item</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-1558612"></A>                             :text &quot;Special&quot;</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-1558613"></A>                             :data 1000</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-1558614"></A>                             :selection-callback </PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-1558615"></A>                             'specific-callback)</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-1558616"></A>                            2 3 4)</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-1558617"></A>               :selection-callback 'generic-callback)</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-1558618"></A>              :visible-min-width 200</PRE>
<PRE CLASS="RCode-last"><A NAME="pgfId-1550395"></A>              :visible-min-height 200)</PRE>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-1550396"></A>See also</H5>
<P CLASS="RBody">
<A NAME="pgfId-888020"></A><A HREF="capiref-11.htm#52257" CLASS="XRef">append-items</A><BR>
<A HREF="capiref-60.htm#27182" CLASS="XRef">count-collection-items</A><BR>
<A HREF="capiref-151.htm#35080" CLASS="XRef">get-collection-item</A><BR>
<A HREF="capiref-205.htm#18686" CLASS="XRef">item</A><BR>
<A HREF="capiref-240.htm#22941" CLASS="XRef">map-collection-items</A><BR>
<A HREF="capiref-304.htm#48783" CLASS="XRef">print-collection-item</A><BR>
<A HREF="capiref-374.htm#40540" CLASS="XRef">search-for-item</A></P>
</DIV>
<HR>
<P CLASS="Copyrighttext-small"><I CLASS="Italic">CAPI Reference Manual - 15 Dec 2011</I></P>
<P><A HREF="capiref-46.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A><A HREF="capiref-44.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Prev BORDER=0></A><A HREF="capiref-4.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A><A HREF="capiref.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A><A HREF="capiref-2.htm"><IMG ALIGN=BOTTOM SRC=contents.gif ALT=Contents BORDER=0></A><A HREF="capiref-693.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A>
</BODY>
</HTML>
