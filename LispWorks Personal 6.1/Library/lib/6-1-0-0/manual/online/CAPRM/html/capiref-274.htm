<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 6.0/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="capiref.css" CHARSET="ISO-8859-1" TYPE="text/css">
<TITLE>
 option-pane
</TITLE>

<LINK REL="next" HREF="capiref-275.htm" TYPE="text/html">
<LINK REL="prev" HREF="capiref-273.htm" TYPE="text/html">
<LINK REL="up" HREF="capiref-4.htm" TYPE="text/html">
<LINK REL="top" HREF="capiref.htm" TYPE="text/html">
<LINK REL="contents" HREF="capiref-2.htm" TYPE="text/html">
<LINK REL="index" HREF="capiref-693.htm" TYPE="text/html">
</HEAD>
<BODY BGCOLOR="#ffffff">
<DIV CLASS="HTMLBreadCrumbs"><A HREF="../../intro.htm">All Manuals</A> &gt; <A HREF="capiref.htm">CAPI Reference Manual</A> &gt; <A HREF="capiref-4.htm">1 CAPI Reference Entries</A><BR><BR>
</DIV><A HREF="capiref-275.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A><A HREF="capiref-273.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Prev BORDER=0></A><A HREF="capiref-4.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A><A HREF="capiref.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A><A HREF="capiref-2.htm"><IMG ALIGN=BOTTOM SRC=contents.gif ALT=Contents BORDER=0></A><A HREF="capiref-693.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A>
<H4 CLASS="REntry">
<A NAME="pgfId-901313"></A><A NAME="24685"></A>option<A NAME="marker-4173269"></A>-pane</H4>
<DIV>
<H5 CLASS="REntry-type">
<A NAME="pgfId-901789"></A>Class</H5>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-901314"></A>Summary</H5>
<P CLASS="RBody">
<A NAME="pgfId-901319"></A>A pane which offers a choice of items, but which displays only the currently selected item. </P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-4173247"></A>Package</H5>
<P CLASS="RSignature">
<A NAME="pgfId-4173248"></A>capi</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-901322"></A>Superclasses</H5>
<P CLASS="RBody">
<A NAME="pgfId-901324"></A><A HREF="capiref-33.htm#22482" CLASS="XRef">choice</A><BR>
<A HREF="capiref-449.htm#12473" CLASS="XRef">titled-object</A><BR>
<A HREF="capiref-408.htm#40919" CLASS="XRef">simple-pane</A></P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-901327"></A>Initargs</H5>
<P CLASS="RDescription-Item">
<A NAME="pgfId-901329"></A><CODE CLASS="Code">
:enabled</CODE>
<A NAME="marker-952890"></A></P>
<P CLASS="RDescription-C">Non-nil if the option pane is enabled.</P>
<P CLASS="RDescription">
<A NAME="pgfId-3004144"></A><CODE CLASS="Code">
:visible-items-count</CODE>
<A NAME="marker-3004152"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-3004324"></A>An integer or the symbol <CODE CLASS="Code">
:default</CODE>
.</P>
<P CLASS="RDescription">
<A NAME="pgfId-5369700"></A><CODE CLASS="Code">
:popup-callback</CODE>
<A NAME="marker-5369712"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-5369716"></A>A function called just before the popup menu appears, or <CODE CLASS="Code">
nil</CODE>
.</P>
<P CLASS="RDescription">
<A NAME="pgfId-5491761"></A><CODE CLASS="Code">
:image-function</CODE>
<A NAME="marker-5491760"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-9234185"></A>A function providing images for items, or <CODE CLASS="Code">
nil</CODE>
.</P>
<P CLASS="RDescription">
<A NAME="pgfId-9234195"></A><CODE CLASS="Code">
:image-lists</CODE>
<A NAME="marker-9234193"></A><A NAME="marker-9234194"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-9234191"></A>A plist of keywords and <A HREF="capiref-177.htm#12301" CLASS="XRef">image-list</A> objects.</P>
<P CLASS="RDescription">
<A NAME="pgfId-9234187"></A><CODE CLASS="Code">
:separator-item</CODE>
<A NAME="marker-9234186"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-9234188"></A>An item that acts as a separator between other items, or <CODE CLASS="Code">
nil</CODE>
.</P>
<P CLASS="RDescription">
<A NAME="pgfId-5662300"></A><CODE CLASS="Code">
:enabled-positions</CODE>
<A NAME="marker-5662299"></A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-5662301"></A>A list of fixnums, or the keyword <CODE CLASS="Code">
:all</CODE>
.</P>
<P CLASS="RDescription">
<A NAME="pgfId-10418379"></A><CODE CLASS="Code">
:window-</CODE>
<A NAME="marker-10418378"></A><A NAME="marker-10421699"></A><CODE CLASS="Code">
styles</CODE>
</P>
<P CLASS="RDescription-C">
<A NAME="pgfId-10418380"></A>A list of keywords.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-901331"></A>Accessors</H5>
<P CLASS="RSignature">
<A NAME="pgfId-901333"></A><A NAME="marker-3801351"></A>option-pane-enabled<BR>
<A NAME="marker-5538283"></A>option-pane-image-function<BR>
<A NAME="marker-3801356"></A>option-pane-visible-items-count<BR>
<A NAME="marker-5369741"></A>option-pane-popup-callback<BR>
<A NAME="marker-5662606"></A>option-pane-separator-item<BR>
<A NAME="marker-5662629"></A>option-pane-enabled-positions</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-901335"></A>Description</H5>
<P CLASS="RBody">
<A NAME="pgfId-901337"></A>The class <CODE CLASS="Code">
option-pane</CODE>
 provides a pane which offers a choice between a number of items via a popup menu. Only the currently selected item is displayed.</P>
<P CLASS="RBody">
<A NAME="pgfId-3005608"></A>The class <CODE CLASS="Code">
option-pane</CODE>
 inherits from <A HREF="capiref-33.htm#22482" CLASS="XRef">choice</A>, and so has all of the standard choice behavior such as selection and callbacks. It also has an extra <EM CLASS="Variable">
enabled</EM>
 slot along with an accessor which is used to enable and disable the option pane.</P>
<P CLASS="RBody">
<A NAME="pgfId-3005683"></A><EM CLASS="Variable">
visible-items-count</EM>
 is implemented only on Microsoft Windows. If <EM CLASS="Variable">
visible-items-count</EM>
 is an integer then the popup menu is no longer than this, and is scrollable if there are more items. If <EM CLASS="Variable">
visible-items-count</EM>
 is <CODE CLASS="Code">
:default</CODE>
, then the popup menu is no longer than 10. This is the default value.</P>
<P CLASS="RBody">
<A NAME="pgfId-5367271"></A>When <EM CLASS="Variable">
popup-callback</EM>
 is non-nil, it should be a function of one argument that will be called just before the popup menu appears when the user clicks on it. The single argument to the function is the option pane and the return value is ignored. If required, the function can change the items or selection of the pane. The default value of <EM CLASS="Variable">
popup-callback</EM>
 is <CODE CLASS="Code">
nil</CODE>
.</P>
<P CLASS="RBody">
<A NAME="pgfId-9234208"></A>If <EM CLASS="Variable">
image-function</EM>
 is non-nil, it should be a function of one argument which is called with each item. The return value depends on <EM CLASS="Variable">
image-lists</EM>
. If <EM CLASS="Variable">
image-lists</EM>
 contains an <A HREF="capiref-177.htm#12301" CLASS="XRef">image-list</A> for the <CODE CLASS="Code">
:normal</CODE>
 key, then the result of <EM CLASS="Variable">
image-function</EM>
 should be one of the following: </P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-9234314"></A>A pathname or string</P>
<P CLASS="RDescription-C">
<A NAME="pgfId-9234315"></A>This specifies the filename of a file suitable for loading with <A HREF="capiref-592.htm#43526" CLASS="XRef">load-image</A>. Currently this must be a bitmap file.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-9234319"></A>A symbol</P>
<P CLASS="RDescription-C">The symbol must have been previously registered by means of a call to <CODE CLASS="Code">
<A HREF="capiref-627.htm#80995" CLASS="XRef">register-image-translation</A></CODE>
.</P>
<P CLASS="RDescription">
<A NAME="pgfId-9234326"></A>An image object, as returned by <A HREF="capiref-592.htm#43526" CLASS="XRef">load-image</A>.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-9234327"></A>An image locator object</P>
<P CLASS="RDescription-C">
<A NAME="pgfId-9234328"></A>This allowing a single bitmap to be created which contains several button images side by side. See <A HREF="capiref-232.htm#38910" CLASS="XRef">make-image-locator</A> for more information. On Microsoft Windows, it also allows access to bitmaps stored as resources in a DLL.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-9234332"></A>An integer</P>
<P CLASS="RDescription-C">This is a zero-based index into the option-pane's <A HREF="capiref-177.htm#12301" CLASS="XRef">image-list</A>. This is generally only useful if the image list is created explicitly. See <A HREF="capiref-177.htm#12301" CLASS="XRef">image-list</A> for more details.</P>
<P CLASS="RBody">
<A NAME="pgfId-9234312"></A>Otherwise if there is no <A HREF="capiref-177.htm#12301" CLASS="XRef">image-list</A> then it should return one of: </P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-9234278"></A><CODE CLASS="Code">
nil</CODE>
</P>
<P CLASS="RDescription-C">No image is shown.</P>
<P CLASS="RDescription-Item">
<A NAME="pgfId-9234282"></A>An <A HREF="capiref-574.htm#77313" CLASS="XRef">image</A> object</P>
<P CLASS="RDescription-C"></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-9234283"></A>The pane displays this image.</P>
<P CLASS="RDescription">
<A NAME="pgfId-9234287"></A>An image id or <A HREF="capiref-537.htm#53640" CLASS="XRef">external-image</A></P>
<P CLASS="RDescription-C">
<A NAME="pgfId-9234288"></A>The system converts the value to a temporary <A HREF="capiref-574.htm#77313" CLASS="XRef">image</A> for the item and frees it when it is no longer needed.</P>
<P CLASS="RBody">
<A NAME="pgfId-9234292"></A>If <EM CLASS="Variable">
image-function</EM>
 is <CODE CLASS="Code">
nil</CODE>
, no items have images. This is the default value..</P>
<P CLASS="RBody">
<A NAME="pgfId-9234123"></A>If <EM CLASS="Variable">
image-lists</EM>
 is specified, it should be a plist containing the keyword <CODE CLASS="Code">
:normal</CODE>
 as a key. The corresponding value should be an <A HREF="capiref-177.htm#12301" CLASS="XRef">image-list</A> object. No other keys are supported at the present time. The <A HREF="capiref-177.htm#12301" CLASS="XRef">image-list</A> associated with the <CODE CLASS="Code">
:normal</CODE>
 key is used with the <EM CLASS="Variable">
image-function</EM>
 (see above) to specify an image to display in each tab.</P>
<P CLASS="RBody">
<A NAME="pgfId-5662371"></A><EM CLASS="Variable">
separator-item</EM>
 should be an item (compared using <EM CLASS="Variable">
test-function</EM>
) that acts as a separator between other items. A separator item is not selectable. The default value <CODE CLASS="Code">
nil</CODE>
 means that there are no separators (regardless of <EM CLASS="Variable">
test-function</EM>
).</P>
<P CLASS="RBody">
<A NAME="pgfId-8117502"></A>If <EM CLASS="Variable">
enabled-positions</EM>
 is <CODE CLASS="Code">
:all</CODE>
 then all the items can be selected. Otherwise the value is a list of fixnums indicating the positions in the item list which can be selected. The default value is <CODE CLASS="Code">
:all</CODE>
. </P>
<P CLASS="RBody">
<A NAME="pgfId-10421706"></A>On Microsoft Windows Vista and Windows 7, if <EM CLASS="Variable">
window-styles</EM>
 contains the keyword <CODE CLASS="Code">
:simple-text-only</CODE>
, then the <CODE CLASS="Code">
option-pane</CODE>
 is displayed using the UI theme and the <EM CLASS="Variable">
enabled-positions</EM>
, <EM CLASS="Variable">
separator-item</EM>
, <EM CLASS="Variable">
image-function</EM>
 and <EM CLASS="Variable">
visible-items-count</EM>
 initargs are not supported. Otherwise it is displayed without the UI theme and those options work as documented. This is a limitation in Microsoft Windows.</P>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-8117525"></A>Notes</H5>
<OL>
<LI CLASS="RStep-1">
<A NAME="pgfId-5662643"></A><CODE CLASS="Code">
:image-function</CODE>
 and <CODE CLASS="Code">
:image-lists</CODE>
 are  currently only implemented for Microsoft Windows, GTK+ and Cocoa.</LI>
<LI CLASS="RStep">
<A NAME="pgfId-8117577"></A>On Motif, the separator is represented simply as a blank item between the other items.</LI>
<LI CLASS="RStep">
<A NAME="pgfId-5664996"></A>On Motif and GTK+ versions older than 2.12, there is no visible representation of the disabled items.</LI>
</OL>
</DIV>
<DIV>
<H5 CLASS="REntry-head">
<A NAME="pgfId-5662591"></A>Example</H5>
<P CLASS="RBody">
<A NAME="pgfId-1654526"></A>This example sets the selection and changes the enabled state of an <CODE CLASS="Code">
option-pane</CODE>
:</P>
<PRE CLASS="RCode-first"><A NAME="pgfId-4421697"></A>(setq option-pane (capi:contain</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4421698"></A>                   (make-instance 'capi:option-pane</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4421699"></A>                                  :items '(1 2 3 4 5)</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4421700"></A>                                  :selected-item 3)))</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4421701"></A>&nbsp;</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4421702"></A>(capi:apply-in-pane-process </PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4421703"></A> option-pane #'(setf capi:choice-selected-item) </PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4421704"></A> 5 option-pane)</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4421705"></A>&nbsp;</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4421706"></A>(capi:apply-in-pane-process </PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4421707"></A> option-pane #'(setf capi:option-pane-enabled) </PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4421708"></A> nil option-pane)</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4421709"></A>&nbsp;</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4421710"></A>(capi:apply-in-pane-process </PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-4421711"></A> option-pane #'(setf capi:option-pane-enabled) </PRE>
<PRE CLASS="RCode-last"><A NAME="pgfId-3006867"></A> t option-pane)</PRE>
<P CLASS="RBody">
<A NAME="pgfId-4424006"></A>This example illustrates the use of <EM CLASS="Variable">
visible-items-count</EM>
 (Windows only):</P>
<PRE CLASS="RCode-first"><A NAME="pgfId-3007071"></A>(capi:contain</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-3007072"></A> (make-instance 'capi:option-pane</PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-3007073"></A>                :items </PRE>
<PRE CLASS="RCode-body"><A NAME="pgfId-3007074"></A>                (loop for i below 20 collect i)</PRE>
<PRE CLASS="RCode-last"><A NAME="pgfId-3007069"></A>                :visible-items-count 6))</PRE>
<P CLASS="RBody">
<A NAME="pgfId-3481792"></A>There are further examples in the files <CODE CLASS="Code">
examples/capi/choice/option-pane.lisp</CODE>
 and <CODE CLASS="Code">
examples/capi/choice/option-pane-with-images.lisp</CODE>
.</P>
</DIV>
<HR>
<P CLASS="Copyrighttext-small"><I CLASS="Italic">CAPI Reference Manual - 15 Dec 2011</I></P>
<P><A HREF="capiref-275.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A><A HREF="capiref-273.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Prev BORDER=0></A><A HREF="capiref-4.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A><A HREF="capiref.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A><A HREF="capiref-2.htm"><IMG ALIGN=BOTTOM SRC=contents.gif ALT=Contents BORDER=0></A><A HREF="capiref-693.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A>
</BODY>
</HTML>
